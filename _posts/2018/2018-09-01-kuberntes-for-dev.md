---
layout: post
title:  "一般开发者的 Kubernetes 使用指南"
date:   2018-08-11 14:20:33
---

一般开发人员，比如 Java 开发人员来说，如何使用 Kubernetes 呢？其实就是如何开发云原生(cloud native)应用。

我觉得最理想的方式是透明、无侵入，也就是说你原来如何开发，现在还是老样子。

1. liveness

2. CI/CD
不用考虑太多打包、编译，只有不断试错且每次尝试代价很小，才能在这个新环境中快速上手而不怕失败。

3. 开发环境
一般都是在环境中直接开发调试，不用做成镜像，带热部署（修改代码后不用重启 server）功能。
开发环境中能直接访问 kubernetes 上面的服务 port-forward
in-cluster, outside-cluster

4. 参数和环境变量，不要使用配置文件

5. 保持无状态，保持简单。
应用能被 kill 掉而反复重启，反复重启对功能无影响。
能水平扩展：能其多个实例而正常运行，实现中避免同步锁，太复杂。
能快速运行起来，能快速的关掉干净的退出。保存轻量级。Java 在这里似乎就有些笨重了。
应用切分足够小，容易测试。

5. 错误的处理
能适应各种无法预料的问题，但是不要掩盖错误（这会让分布式的调试更加复杂）
日志直接吐到标准输出 stdout，这样后端能接到